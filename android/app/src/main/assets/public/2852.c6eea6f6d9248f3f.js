"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2852],{8490:(B,k,l)=>{l.d(k,{u:()=>T});var _=l(467),N=l(2615),E=l(7291);let T=(()=>{var D;class v{constructor(f){this.storageService=f}getContacts(){var f=this;return(0,_.A)(function*(){return f.storageService.getContacts()})()}addContact(f){var u=this;return(0,_.A)(function*(){return u.storageService.addContact(f)})()}updateContact(f){var u=this;return(0,_.A)(function*(){return u.storageService.updateContact(f)})()}deleteContact(f){var u=this;return(0,_.A)(function*(){return u.storageService.deleteContact(f)})()}static#t=D=()=>(this.\u0275fac=function(u){return new(u||v)(N.KVO(E.n))},this.\u0275prov=N.jDH({token:v,factory:v.\u0275fac,providedIn:"root"}))}return D(),v})()},9731:(B,k,l)=>{l.d(k,{Z:()=>j});var _=l(467),N=l(9350),E=l(7707),D=l(2615),v=l(9330);let j=(()=>{var f;class u{constructor(m){this.http=m,this.nameDayData=null,this.flatNameDayList=[],this.loadNameDays()}normalizeString(m){return m.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}loadNameDays(){var m=this;return(0,_.A)(function*(){try{m.nameDayData=yield function T(f,u){const A="object"==typeof u;return new Promise((m,h)=>{const y=new E.Ms({next:b=>{m(b),y.unsubscribe()},error:h,complete:()=>{A?m(u.defaultValue):h(new N.G)}});f.subscribe(y)})}(m.http.get("assets/namedays/namedays.json")),m.prepareFlatList()}catch(h){console.error("Error loading name day data:",h)}})()}prepareFlatList(){if(!this.nameDayData)return;this.flatNameDayList=[];const m=(new Date).getFullYear(),h={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11};for(const y in this.nameDayData){const b=h[y];if(void 0===b)continue;const C=this.nameDayData[y];for(const p in C){const F=C[p];for(const r in F)F[r].forEach(g=>{const M=new Date(m,b,parseInt(p,10));this.flatNameDayList.push({name:g,normalizedName:this.normalizeString(g),date:M.toISOString(),tradition:r})})}}}findDatesForName(m){var h=this;return(0,_.A)(function*(y,b="Hungary"){0===h.flatNameDayList.length&&(yield h.loadNameDays());const C=h.normalizeString(y);return h.flatNameDayList.filter(p=>p.normalizedName===C&&p.tradition===b).map(p=>p.date)}).apply(this,arguments)}getAutocompleteSuggestions(m){var h=this;return(0,_.A)(function*(y,b="Hungary"){0===h.flatNameDayList.length&&(yield h.loadNameDays());const C=h.normalizeString(y);if(!C)return[];const p=h.flatNameDayList.filter(F=>F.normalizedName.startsWith(C)&&F.tradition===b).map(F=>F.name);return[...new Set(p)]}).apply(this,arguments)}getAllNameDays(){var m=this;return(0,_.A)(function*(){return 0===m.flatNameDayList.length&&(yield m.loadNameDays()),m.flatNameDayList})()}static#t=f=()=>(this.\u0275fac=function(h){return new(h||u)(D.KVO(v.Qq))},this.\u0275prov=D.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}))}return f(),u})()},9739:(B,k,l)=>{l.d(k,{w:()=>z});var _=l(467),N=l(1413),E=l(8359);class T extends E.yU{constructor(e,a){super()}schedule(e,a=0){return this}}const D={setInterval(s,e,...a){const{delegate:n}=D;return n?.setInterval?n.setInterval(s,e,...a):setInterval(s,e,...a)},clearInterval(s){const{delegate:e}=D;return(e?.clearInterval||clearInterval)(s)},delegate:void 0};var v=l(7908);const f={now:()=>(f.delegate||Date).now(),delegate:void 0};class u{constructor(e,a=u.now){this.schedulerActionCtor=e,this.now=a}schedule(e,a=0,n){return new this.schedulerActionCtor(this,e).schedule(n,a)}}u.now=f.now;const m=new class A extends u{constructor(e,a=u.now){super(e,a),this.actions=[],this._active=!1}flush(e){const{actions:a}=this;if(this._active)return void a.push(e);let n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=a.shift());if(this._active=!1,n){for(;e=a.shift();)e.unsubscribe();throw n}}}(class j extends T{constructor(e,a){super(e,a),this.scheduler=e,this.work=a,this.pending=!1}schedule(e,a=0){var n;if(this.closed)return this;this.state=e;const o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,a)),this.pending=!0,this.delay=a,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,a),this}requestAsyncId(e,a,n=0){return D.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,a,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return a;null!=a&&D.clearInterval(a)}execute(e,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,a);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,a){let o,n=!1;try{this.work(e)}catch(i){n=!0,o=i||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:a}=this,{actions:n}=a;this.work=this.state=this.scheduler=null,this.pending=!1,(0,v.o)(n,this),null!=e&&(this.id=this.recycleAsyncId(a,e,null)),this.delay=null,super.unsubscribe()}}});var y=l(9974),b=l(4360),p=l(3294),F=l(5558),r=l(9893),t=l(3664),g=l(2615);let M=(()=>{var s;class e{constructor(n){this.modalCtrl=n,this.selectedDate=null}onDateChange(n){this.selectedDate=n.detail.value}dismiss(n){this.modalCtrl.dismiss(n)}confirm(){this.modalCtrl.dismiss({date:this.selectedDate},"confirm")}static#t=s=()=>(this.\u0275fac=function(o){return new(o||e)(t.rXU(r.W3))},this.\u0275cmp=t.VBU({type:e,selectors:[["app-date-picker"]],decls:13,vars:1,consts:[["datetime",""],["slot","start"],[3,"click"],["slot","end"],[3,"click","strong"],["presentation","date",3,"ionChange"]],template:function(o,i){if(1&o){const d=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),t.bIt("click",function(){return g.eBV(d),g.Njj(i.dismiss(null))}),t.EFF(4,"Cancel"),t.k0s()(),t.j41(5,"ion-title"),t.EFF(6,"Select Date"),t.k0s(),t.j41(7,"ion-buttons",3)(8,"ion-button",4),t.bIt("click",function(){return g.eBV(d),g.Njj(i.confirm())}),t.EFF(9,"OK"),t.k0s()()()(),t.j41(10,"ion-content")(11,"ion-datetime",5,0),t.bIt("ionChange",function(R){return g.eBV(d),g.Njj(i.onDateChange(R))}),t.k0s()()}2&o&&(t.R7$(8),t.Y8G("strong",!0))},dependencies:[r.bv,r.Jm,r.QW,r.W9,r.A9,r.eU,r.BC,r.ai,r.Je],encapsulation:2}))}return s(),e})();var P=l(2200),S=l(4341),G=l(9731);function O(s,e){if(1&s){const a=t.RV6();t.j41(0,"ion-item",18),t.bIt("click",function(){const o=g.eBV(a).$implicit,i=t.XpG(2);return g.Njj(i.selectNameSuggestion(o))}),t.j41(1,"ion-label"),t.EFF(2),t.k0s()()}if(2&s){const a=e.$implicit;t.R7$(2),t.JRh(a)}}function V(s,e){if(1&s&&(t.j41(0,"ion-list"),t.DNE(1,O,3,1,"ion-item",17),t.k0s()),2&s){const a=t.XpG();t.R7$(),t.Y8G("ngForOf",a.nameSuggestions)}}function L(s,e){if(1&s&&(t.j41(0,"ion-label"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&s){const a=t.XpG();t.R7$(),t.JRh(t.i5U(2,1,a.contact.birthday,"longDate"))}}function U(s,e){1&s&&(t.j41(0,"ion-label",19),t.EFF(1,"Tap to add birthday"),t.k0s())}function Y(s,e){1&s&&t.nrm(0,"ion-icon",20)}function $(s,e){if(1&s){const a=t.RV6();t.j41(0,"ion-button",21),t.bIt("click",function(o){g.eBV(a);const i=t.XpG();return g.Njj(i.removeBirthday(o))}),t.nrm(1,"ion-icon",22),t.k0s()}}function W(s,e){if(1&s){const a=t.RV6();t.j41(0,"ion-item")(1,"ion-label"),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"ion-button",21),t.bIt("click",function(){const o=g.eBV(a).index,i=t.XpG();return g.Njj(i.removeNameDay(o))}),t.nrm(5,"ion-icon",22),t.k0s()()}if(2&s){const a=e.$implicit;t.R7$(2),t.JRh(t.i5U(3,1,a.date,"longDate"))}}let z=(()=>{var s;class e{constructor(n,o){this.modalCtrl=n,this.nameDayService=o,this.contactToEdit=null,this.initialData=null,this.contact={firstName:"",lastName:"",birthday:void 0,phoneNumber:"",nameDays:[],reminderEnabled:!0},this.isEdit=!1,this.nameSuggestions=[],this.nameChanged=new N.B,this.autoAddedNameDayDates=[],this.nameChanged.pipe(function C(s,e=m){return(0,y.N)((a,n)=>{let o=null,i=null,d=null;const c=()=>{if(o){o.unsubscribe(),o=null;const I=i;i=null,n.next(I)}};function R(){const I=d+s,w=e.now();if(w<I)return o=this.schedule(void 0,I-w),void n.add(o);c()}a.subscribe((0,b._)(n,I=>{i=I,d=e.now(),o||(o=e.schedule(R,s),n.add(o))},()=>{c(),n.complete()},void 0,()=>{i=o=null}))})}(250),(0,p.F)(),(0,F.n)(i=>this.nameDayService.getAutocompleteSuggestions(i))).subscribe(i=>{this.nameSuggestions=i})}ngOnInit(){this.contactToEdit?(this.isEdit=!0,this.contact={...this.contactToEdit}):this.initialData&&(this.initialData.firstName&&(this.contact.firstName=this.initialData.firstName),this.initialData.nameDayDate&&this.contact.nameDays.push({date:this.initialData.nameDayDate}),this.initialData.birthdayDate&&(this.contact.birthday=this.initialData.birthdayDate))}onNameChange(n){this.autoAddedNameDayDates.length>0&&(this.contact.nameDays=this.contact.nameDays.filter(i=>!this.autoAddedNameDayDates.includes(i.date)),this.autoAddedNameDayDates=[]);const o=n.target.value;o?this.nameChanged.next(o):this.nameSuggestions=[]}selectNameSuggestion(n){var o=this;return(0,_.A)(function*(){o.contact.firstName=n,o.nameSuggestions=[],(yield o.nameDayService.findDatesForName(n)).forEach(d=>{o.contact.nameDays.some(c=>c.date===d)||(o.contact.nameDays.push({date:d}),o.autoAddedNameDayDates.push(d))})})()}addDate(n){var o=this;return(0,_.A)(function*(){const i=yield o.modalCtrl.create({component:M});yield i.present();const{data:d,role:c}=yield i.onWillDismiss();"confirm"===c&&d&&d.date&&("birthday"===n?o.contact.birthday=d.date:o.contact.nameDays.push({date:d.date}))})()}removeBirthday(n){n.stopPropagation(),this.contact.birthday=void 0}removeNameDay(n){this.contact.nameDays.splice(n,1)}dismissModal(n=null){this.modalCtrl.dismiss(n)}saveContact(){this.modalCtrl.dismiss({contact:this.contact,role:"save"})}static#t=s=()=>(this.\u0275fac=function(o){return new(o||e)(t.rXU(r.W3),t.rXU(G.Z))},this.\u0275cmp=t.VBU({type:e,selectors:[["app-contact-form"]],inputs:{contactToEdit:"contactToEdit",initialData:"initialData"},decls:36,vars:12,consts:[["slot","start"],[3,"click"],["slot","end"],[3,"click","disabled"],[1,"ion-padding"],["label","First Name","labelPlacement","stacked","required","",3,"ngModelChange","ionInput","ngModel"],[4,"ngIf"],["label","Last Name","labelPlacement","stacked",3,"ngModelChange","ngModel"],["label","Phone Number","labelPlacement","stacked","type","tel",3,"ngModelChange","ngModel"],["button","true",3,"click"],["color","medium",4,"ngIf"],["name","calendar-outline","slot","end","color","medium",4,"ngIf"],["fill","clear","slot","end",3,"click",4,"ngIf"],["slot","end","fill","clear",3,"click"],["name","calendar-outline"],[4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["color","medium"],["name","calendar-outline","slot","end","color","medium"],["fill","clear","slot","end",3,"click"],["name","remove-circle-outline","color","danger"]],template:function(o,i){1&o&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-buttons",0)(5,"ion-button",1),t.bIt("click",function(){return i.dismissModal()}),t.EFF(6,"Cancel"),t.k0s()(),t.j41(7,"ion-buttons",2)(8,"ion-button",3),t.bIt("click",function(){return i.saveContact()}),t.EFF(9,"Save"),t.k0s()()()(),t.j41(10,"ion-content",4)(11,"ion-list")(12,"ion-item")(13,"ion-input",5),t.mxI("ngModelChange",function(c){return t.DH7(i.contact.firstName,c)||(i.contact.firstName=c),c}),t.bIt("ionInput",function(c){return i.onNameChange(c)}),t.k0s()(),t.DNE(14,V,2,1,"ion-list",6),t.j41(15,"ion-item")(16,"ion-input",7),t.mxI("ngModelChange",function(c){return t.DH7(i.contact.lastName,c)||(i.contact.lastName=c),c}),t.k0s()(),t.j41(17,"ion-item")(18,"ion-input",8),t.mxI("ngModelChange",function(c){return t.DH7(i.contact.phoneNumber,c)||(i.contact.phoneNumber=c),c}),t.k0s()(),t.j41(19,"ion-item-divider")(20,"ion-label"),t.EFF(21,"Birthday"),t.k0s()(),t.j41(22,"ion-item",9),t.bIt("click",function(){return i.addDate("birthday")}),t.DNE(23,L,3,4,"ion-label",6)(24,U,2,0,"ion-label",10)(25,Y,1,0,"ion-icon",11)(26,$,2,0,"ion-button",12),t.k0s(),t.j41(27,"ion-item-divider")(28,"ion-label"),t.EFF(29,"Name Days"),t.k0s(),t.j41(30,"ion-button",13),t.bIt("click",function(){return i.addDate("nameDay")}),t.nrm(31,"ion-icon",14),t.k0s()(),t.DNE(32,W,6,4,"ion-item",15),t.j41(33,"ion-item")(34,"ion-toggle",16),t.mxI("ngModelChange",function(c){return t.DH7(i.contact.reminderEnabled,c)||(i.contact.reminderEnabled=c),c}),t.EFF(35,"Enable Reminders"),t.k0s()()()()),2&o&&(t.R7$(3),t.SpI("",i.isEdit?"Edit":"Add"," Contact"),t.R7$(5),t.Y8G("disabled",!i.contact.firstName),t.R7$(5),t.R50("ngModel",i.contact.firstName),t.R7$(),t.Y8G("ngIf",i.nameSuggestions.length>0),t.R7$(2),t.R50("ngModel",i.contact.lastName),t.R7$(2),t.R50("ngModel",i.contact.phoneNumber),t.R7$(5),t.Y8G("ngIf",i.contact.birthday),t.R7$(),t.Y8G("ngIf",!i.contact.birthday),t.R7$(),t.Y8G("ngIf",!i.contact.birthday),t.R7$(),t.Y8G("ngIf",i.contact.birthday),t.R7$(6),t.Y8G("ngForOf",i.contact.nameDays),t.R7$(2),t.R50("ngModel",i.contact.reminderEnabled))},dependencies:[r.bv,r.Jm,r.QW,r.W9,r.eU,r.iq,r.$w,r.uz,r.Dg,r.he,r.nf,r.BC,r.BY,r.ai,r.hB,r.Gw,P.MD,P.Sq,P.bT,S.YN,S.BC,S.YS,S.vS,P.vh],encapsulation:2}))}return s(),e})()}}]);